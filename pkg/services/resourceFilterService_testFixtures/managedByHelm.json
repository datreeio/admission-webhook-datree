{
  "kind": "AdmissionReview",
  "apiVersion": "admission.k8s.io/v1",
  "request": {
    "uid": "605ca5c5-02bc-43a9-bbff-aa5892b47d15",
    "kind": {
      "group": "apps",
      "version": "v1",
      "kind": "Deployment"
    },
    "resource": {
      "group": "apps",
      "version": "v1",
      "resource": "deployments"
    },
    "requestKind": {
      "group": "apps",
      "version": "v1",
      "kind": "Deployment"
    },
    "requestResource": {
      "group": "apps",
      "version": "v1",
      "resource": "deployments"
    },
    "name": "my-leantime",
    "namespace": "default",
    "operation": "CREATE",
    "userInfo": {
      "username": "minikube-user",
      "groups": [
        "system:masters",
        "system:authenticated"
      ]
    },
    "object": {
      "kind": "Deployment",
      "apiVersion": "apps/v1",
      "metadata": {
        "name": "my-leantime",
        "namespace": "default",
        "uid": "b346649a-fbc6-4545-abed-0941a5a787a9",
        "generation": 1,
        "creationTimestamp": "2022-10-11T08:39:45Z",
        "labels": {
          "app.kubernetes.io/instance": "my-leantime",
          "app.kubernetes.io/managed-by": "Helm",
          "app.kubernetes.io/name": "leantime",
          "app.kubernetes.io/version": "2.1.9",
          "helm.sh/chart": "leantime-2.0.16"
        },
        "annotations": {
          "meta.helm.sh/release-name": "my-leantime",
          "meta.helm.sh/release-namespace": "default",
          "rollme": "6adtT"
        },
        "managedFields": [
          {
            "manager": "helm",
            "operation": "Update",
            "apiVersion": "apps/v1",
            "time": "2022-10-11T08:39:45Z",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:annotations": {
                  ".": {},
                  "f:meta.helm.sh/release-name": {},
                  "f:meta.helm.sh/release-namespace": {},
                  "f:rollme": {}
                },
                "f:labels": {
                  ".": {},
                  "f:app.kubernetes.io/instance": {},
                  "f:app.kubernetes.io/managed-by": {},
                  "f:app.kubernetes.io/name": {},
                  "f:app.kubernetes.io/version": {},
                  "f:helm.sh/chart": {}
                }
              },
              "f:spec": {
                "f:progressDeadlineSeconds": {},
                "f:replicas": {},
                "f:revisionHistoryLimit": {},
                "f:selector": {},
                "f:strategy": {
                  "f:type": {}
                },
                "f:template": {
                  "f:metadata": {
                    "f:annotations": {
                      ".": {},
                      "f:rollme": {}
                    },
                    "f:labels": {
                      ".": {},
                      "f:app.kubernetes.io/instance": {},
                      "f:app.kubernetes.io/name": {}
                    }
                  },
                  "f:spec": {
                    "f:containers": {
                      "k:{\"name\":\"my-leantime\"}": {
                        ".": {},
                        "f:env": {
                          ".": {},
                          "k:{\"name\":\"GID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"GROUP_ID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"LEAN_APP_URL\"}": {
                            ".": {},
                            "f:name": {}
                          },
                          "k:{\"name\":\"LEAN_DB_DATABASE\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"LEAN_DB_HOST\"}": {
                            ".": {},
                            "f:name": {},
                            "f:valueFrom": {
                              ".": {},
                              "f:secretKeyRef": {}
                            }
                          },
                          "k:{\"name\":\"LEAN_DB_PASSWORD\"}": {
                            ".": {},
                            "f:name": {},
                            "f:valueFrom": {
                              ".": {},
                              "f:secretKeyRef": {}
                            }
                          },
                          "k:{\"name\":\"LEAN_DB_USER\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"LEAN_SESSION_PASSWORD\"}": {
                            ".": {},
                            "f:name": {},
                            "f:valueFrom": {
                              ".": {},
                              "f:secretKeyRef": {}
                            }
                          },
                          "k:{\"name\":\"NVIDIA_VISIBLE_DEVICES\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"PGID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"PUID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"TZ\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"UID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"UMASK\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"UMASK_SET\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          },
                          "k:{\"name\":\"USER_ID\"}": {
                            ".": {},
                            "f:name": {},
                            "f:value": {}
                          }
                        },
                        "f:image": {},
                        "f:imagePullPolicy": {},
                        "f:livenessProbe": {
                          ".": {},
                          "f:failureThreshold": {},
                          "f:initialDelaySeconds": {},
                          "f:periodSeconds": {},
                          "f:successThreshold": {},
                          "f:tcpSocket": {
                            ".": {},
                            "f:port": {}
                          },
                          "f:timeoutSeconds": {}
                        },
                        "f:name": {},
                        "f:ports": {
                          ".": {},
                          "k:{\"containerPort\":80,\"protocol\":\"TCP\"}": {
                            ".": {},
                            "f:containerPort": {},
                            "f:name": {},
                            "f:protocol": {}
                          }
                        },
                        "f:readinessProbe": {
                          ".": {},
                          "f:failureThreshold": {},
                          "f:initialDelaySeconds": {},
                          "f:periodSeconds": {},
                          "f:successThreshold": {},
                          "f:tcpSocket": {
                            ".": {},
                            "f:port": {}
                          },
                          "f:timeoutSeconds": {}
                        },
                        "f:resources": {
                          ".": {},
                          "f:limits": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          },
                          "f:requests": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          }
                        },
                        "f:securityContext": {
                          ".": {},
                          "f:allowPrivilegeEscalation": {},
                          "f:capabilities": {},
                          "f:privileged": {},
                          "f:readOnlyRootFilesystem": {},
                          "f:runAsNonRoot": {}
                        },
                        "f:startupProbe": {
                          ".": {},
                          "f:failureThreshold": {},
                          "f:initialDelaySeconds": {},
                          "f:periodSeconds": {},
                          "f:successThreshold": {},
                          "f:tcpSocket": {
                            ".": {},
                            "f:port": {}
                          },
                          "f:timeoutSeconds": {}
                        },
                        "f:terminationMessagePath": {},
                        "f:terminationMessagePolicy": {},
                        "f:volumeMounts": {
                          ".": {},
                          "k:{\"mountPath\":\"/shared\"}": {
                            ".": {},
                            "f:mountPath": {},
                            "f:name": {}
                          },
                          "k:{\"mountPath\":\"/tmp\"}": {
                            ".": {},
                            "f:mountPath": {},
                            "f:name": {}
                          },
                          "k:{\"mountPath\":\"/var/logs\"}": {
                            ".": {},
                            "f:mountPath": {},
                            "f:name": {}
                          }
                        }
                      }
                    },
                    "f:dnsConfig": {
                      ".": {},
                      "f:options": {}
                    },
                    "f:dnsPolicy": {},
                    "f:enableServiceLinks": {},
                    "f:initContainers": {
                      ".": {},
                      "k:{\"name\":\"autopermissions\"}": {
                        ".": {},
                        "f:command": {},
                        "f:image": {},
                        "f:imagePullPolicy": {},
                        "f:name": {},
                        "f:resources": {
                          ".": {},
                          "f:limits": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          },
                          "f:requests": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          }
                        },
                        "f:securityContext": {
                          ".": {},
                          "f:allowPrivilegeEscalation": {},
                          "f:capabilities": {
                            ".": {},
                            "f:drop": {}
                          },
                          "f:privileged": {},
                          "f:runAsUser": {}
                        },
                        "f:terminationMessagePath": {},
                        "f:terminationMessagePolicy": {}
                      },
                      "k:{\"name\":\"hostpatch\"}": {
                        ".": {},
                        "f:command": {},
                        "f:image": {},
                        "f:imagePullPolicy": {},
                        "f:name": {},
                        "f:resources": {},
                        "f:securityContext": {
                          ".": {},
                          "f:privileged": {},
                          "f:runAsUser": {}
                        },
                        "f:terminationMessagePath": {},
                        "f:terminationMessagePolicy": {},
                        "f:volumeMounts": {
                          ".": {},
                          "k:{\"mountPath\":\"/host/bin\"}": {
                            ".": {},
                            "f:mountPath": {},
                            "f:name": {}
                          },
                          "k:{\"mountPath\":\"/host/usr/bin\"}": {
                            ".": {},
                            "f:mountPath": {},
                            "f:name": {}
                          }
                        }
                      },
                      "k:{\"name\":\"mariadb-init\"}": {
                        ".": {},
                        "f:args": {},
                        "f:command": {},
                        "f:env": {
                          ".": {},
                          "k:{\"name\":\"MARIADB_HOST\"}": {
                            ".": {},
                            "f:name": {},
                            "f:valueFrom": {
                              ".": {},
                              "f:secretKeyRef": {}
                            }
                          },
                          "k:{\"name\":\"MARIADB_ROOT_PASSWORD\"}": {
                            ".": {},
                            "f:name": {},
                            "f:valueFrom": {
                              ".": {},
                              "f:secretKeyRef": {}
                            }
                          }
                        },
                        "f:image": {},
                        "f:imagePullPolicy": {},
                        "f:name": {},
                        "f:resources": {
                          ".": {},
                          "f:limits": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          },
                          "f:requests": {
                            ".": {},
                            "f:cpu": {},
                            "f:memory": {}
                          }
                        },
                        "f:securityContext": {
                          ".": {},
                          "f:capabilities": {
                            ".": {},
                            "f:drop": {}
                          }
                        },
                        "f:terminationMessagePath": {},
                        "f:terminationMessagePolicy": {}
                      }
                    },
                    "f:restartPolicy": {},
                    "f:schedulerName": {},
                    "f:securityContext": {
                      ".": {},
                      "f:fsGroup": {},
                      "f:fsGroupChangePolicy": {},
                      "f:runAsGroup": {},
                      "f:runAsUser": {},
                      "f:supplementalGroups": {}
                    },
                    "f:serviceAccount": {},
                    "f:serviceAccountName": {},
                    "f:terminationGracePeriodSeconds": {},
                    "f:volumes": {
                      ".": {},
                      "k:{\"name\":\"host-bin\"}": {
                        ".": {},
                        "f:hostPath": {
                          ".": {},
                          "f:path": {},
                          "f:type": {}
                        },
                        "f:name": {}
                      },
                      "k:{\"name\":\"host-usr-bin\"}": {
                        ".": {},
                        "f:hostPath": {
                          ".": {},
                          "f:path": {},
                          "f:type": {}
                        },
                        "f:name": {}
                      },
                      "k:{\"name\":\"shared\"}": {
                        ".": {},
                        "f:emptyDir": {},
                        "f:name": {}
                      },
                      "k:{\"name\":\"temp\"}": {
                        ".": {},
                        "f:emptyDir": {
                          ".": {},
                          "f:medium": {}
                        },
                        "f:name": {}
                      },
                      "k:{\"name\":\"varlogs\"}": {
                        ".": {},
                        "f:emptyDir": {},
                        "f:name": {}
                      }
                    }
                  }
                }
              }
            }
          }
        ]
      },
      "spec": {
        "replicas": 1,
        "selector": {
          "matchLabels": {
            "app.kubernetes.io/instance": "my-leantime",
            "app.kubernetes.io/name": "leantime"
          }
        },
        "template": {
          "metadata": {
            "creationTimestamp": null,
            "labels": {
              "app.kubernetes.io/instance": "my-leantime",
              "app.kubernetes.io/name": "leantime"
            },
            "annotations": {
              "rollme": "hfJ8s"
            }
          },
          "spec": {
            "volumes": [
              {
                "name": "host-bin",
                "hostPath": {
                  "path": "/bin",
                  "type": ""
                }
              },
              {
                "name": "host-usr-bin",
                "hostPath": {
                  "path": "/usr/bin",
                  "type": ""
                }
              },
              {
                "name": "shared",
                "emptyDir": {}
              },
              {
                "name": "temp",
                "emptyDir": {
                  "medium": "Memory"
                }
              },
              {
                "name": "varlogs",
                "emptyDir": {}
              }
            ],
            "initContainers": [
              {
                "name": "autopermissions",
                "image": "ghcr.io/truecharts/alpine:v3.15.2@sha256:29ed3480a0ee43f7af681fed5d4fc215516abf1c41eade6938b26d8c9c2c7583",
                "command": [
                  "/bin/sh",
                  "-c",
                  "echo 'Automatically correcting permissions...';"
                ],
                "resources": {
                  "limits": {
                    "cpu": "4",
                    "memory": "8Gi"
                  },
                  "requests": {
                    "cpu": "10m",
                    "memory": "50Mi"
                  }
                },
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "imagePullPolicy": "IfNotPresent",
                "securityContext": {
                  "capabilities": {
                    "drop": [
                      "ALL"
                    ]
                  },
                  "privileged": false,
                  "runAsUser": 0,
                  "allowPrivilegeEscalation": false
                }
              },
              {
                "name": "hostpatch",
                "image": "ghcr.io/truecharts/alpine:v3.15.2@sha256:29ed3480a0ee43f7af681fed5d4fc215516abf1c41eade6938b26d8c9c2c7583",
                "command": [
                  "/bin/sh",
                  "-c",
                  "( sysctl -w fs.inotify.max_user_watches=524288 || echo \"error setting inotify\") && ( sysctl -w fs.inotify.max_user_instances=512 || echo \"error setting inotify\") && ( chmod -x /host/usr/bin/docker-compose || echo \"error locking docker-compose\") && ( chmod -x /host/bin/docker-compose || echo \"error locking docker-compose\")"
                ],
                "resources": {},
                "volumeMounts": [
                  {
                    "name": "host-usr-bin",
                    "mountPath": "/host/usr/bin"
                  },
                  {
                    "name": "host-bin",
                    "mountPath": "/host/bin"
                  }
                ],
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "imagePullPolicy": "IfNotPresent",
                "securityContext": {
                  "privileged": true,
                  "runAsUser": 0
                }
              },
              {
                "name": "mariadb-init",
                "image": "ghcr.io/truecharts/mariadb:v10.7.3@sha256:e12463f73268d0310da92124161f0ea39cd83293c4ab2b5254f27f0bd253da9f",
                "command": [
                  "bash",
                  "-ec"
                ],
                "args": [
                  "until\n  mysqladmin -uroot -h\"${MARIADB_HOST}\" -p\"${MARIADB_ROOT_PASSWORD}\" ping \\\n  && mysqladmin -uroot -h\"${MARIADB_HOST}\" -p\"${MARIADB_ROOT_PASSWORD}\" status;\n  do sleep 2;\ndone\n"
                ],
                "env": [
                  {
                    "name": "MARIADB_HOST",
                    "valueFrom": {
                      "secretKeyRef": {
                        "name": "mariadbcreds",
                        "key": "plainhost"
                      }
                    }
                  },
                  {
                    "name": "MARIADB_ROOT_PASSWORD",
                    "valueFrom": {
                      "secretKeyRef": {
                        "name": "mariadbcreds",
                        "key": "mariadb-root-password"
                      }
                    }
                  }
                ],
                "resources": {
                  "limits": {
                    "cpu": "4",
                    "memory": "8Gi"
                  },
                  "requests": {
                    "cpu": "10m",
                    "memory": "50Mi"
                  }
                },
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "imagePullPolicy": "IfNotPresent",
                "securityContext": {
                  "capabilities": {
                    "drop": [
                      "ALL"
                    ]
                  }
                }
              }
            ],
            "containers": [
              {
                "name": "my-leantime",
                "image": "tccr.io/truecharts/leantime:v2.1.9@sha256:ed8060590aa6241d4a9b574b0e9c577e19ea36f7ebf5ff2c1d8f450c50a03ae3",
                "ports": [
                  {
                    "name": "main",
                    "containerPort": 80,
                    "protocol": "TCP"
                  }
                ],
                "env": [
                  {
                    "name": "PUID",
                    "value": "568"
                  },
                  {
                    "name": "USER_ID",
                    "value": "568"
                  },
                  {
                    "name": "UID",
                    "value": "568"
                  },
                  {
                    "name": "UMASK",
                    "value": "2"
                  },
                  {
                    "name": "UMASK_SET",
                    "value": "2"
                  },
                  {
                    "name": "PGID",
                    "value": "568"
                  },
                  {
                    "name": "GROUP_ID",
                    "value": "568"
                  },
                  {
                    "name": "GID",
                    "value": "568"
                  },
                  {
                    "name": "NVIDIA_VISIBLE_DEVICES",
                    "value": "void"
                  },
                  {
                    "name": "TZ",
                    "value": "UTC"
                  },
                  {
                    "name": "LEAN_APP_URL"
                  },
                  {
                    "name": "LEAN_DB_DATABASE",
                    "value": "leantime"
                  },
                  {
                    "name": "LEAN_DB_USER",
                    "value": "leantime"
                  },
                  {
                    "name": "LEAN_DB_HOST",
                    "valueFrom": {
                      "secretKeyRef": {
                        "name": "mariadbcreds",
                        "key": "plainhost"
                      }
                    }
                  },
                  {
                    "name": "LEAN_DB_PASSWORD",
                    "valueFrom": {
                      "secretKeyRef": {
                        "name": "mariadbcreds",
                        "key": "mariadb-password"
                      }
                    }
                  },
                  {
                    "name": "LEAN_SESSION_PASSWORD",
                    "valueFrom": {
                      "secretKeyRef": {
                        "name": "leantime-secrets",
                        "key": "LEAN_SESSION_PASSWORD"
                      }
                    }
                  }
                ],
                "resources": {
                  "limits": {
                    "cpu": "4",
                    "memory": "8Gi"
                  },
                  "requests": {
                    "cpu": "10m",
                    "memory": "50Mi"
                  }
                },
                "volumeMounts": [
                  {
                    "name": "shared",
                    "mountPath": "/shared"
                  },
                  {
                    "name": "temp",
                    "mountPath": "/tmp"
                  },
                  {
                    "name": "varlogs",
                    "mountPath": "/var/logs"
                  }
                ],
                "livenessProbe": {
                  "tcpSocket": {
                    "port": 80
                  },
                  "initialDelaySeconds": 10,
                  "timeoutSeconds": 5,
                  "periodSeconds": 10,
                  "successThreshold": 1,
                  "failureThreshold": 5
                },
                "readinessProbe": {
                  "tcpSocket": {
                    "port": 80
                  },
                  "initialDelaySeconds": 10,
                  "timeoutSeconds": 5,
                  "periodSeconds": 10,
                  "successThreshold": 1,
                  "failureThreshold": 5
                },
                "startupProbe": {
                  "tcpSocket": {
                    "port": 80
                  },
                  "initialDelaySeconds": 10,
                  "timeoutSeconds": 2,
                  "periodSeconds": 5,
                  "successThreshold": 1,
                  "failureThreshold": 60
                },
                "terminationMessagePath": "/dev/termination-log",
                "terminationMessagePolicy": "File",
                "imagePullPolicy": "IfNotPresent",
                "securityContext": {
                  "capabilities": {},
                  "privileged": false,
                  "runAsNonRoot": false,
                  "readOnlyRootFilesystem": false,
                  "allowPrivilegeEscalation": false
                }
              }
            ],
            "restartPolicy": "Always",
            "terminationGracePeriodSeconds": 10,
            "dnsPolicy": "ClusterFirst",
            "serviceAccountName": "default",
            "serviceAccount": "default",
            "securityContext": {
              "runAsUser": 0,
              "runAsGroup": 0,
              "supplementalGroups": [
                568
              ],
              "fsGroup": 568,
              "fsGroupChangePolicy": "OnRootMismatch"
            },
            "schedulerName": "default-scheduler",
            "dnsConfig": {
              "options": [
                {
                  "name": "ndots",
                  "value": "1"
                }
              ]
            },
            "enableServiceLinks": false
          }
        },
        "strategy": {
          "type": "Recreate"
        },
        "revisionHistoryLimit": 3,
        "progressDeadlineSeconds": 600
      },
      "status": {}
    },
    "oldObject": null,
    "dryRun": false,
    "options": {
      "kind": "CreateOptions",
      "apiVersion": "meta.k8s.io/v1",
      "fieldManager": "helm"
    }
  }
}