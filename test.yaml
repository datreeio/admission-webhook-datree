---
# Source: datree-admission-webhook/templates/cluster-scan-cronjob.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: cluster-scan-job-service-account
  namespace: datree
---
# Source: datree-admission-webhook/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: datree-webhook-server
  namespace: datree
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
---
# Source: datree-admission-webhook/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: datree-label-namespaces-hook-post-install
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
---
# Source: datree-admission-webhook/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: datree-cleanup-namespaces-hook-pre-delete
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
---
# Source: datree-admission-webhook/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: datree-wait-server-ready-hook-post-install
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
---
# Source: datree-admission-webhook/templates/webhook-with-cert-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: datree-ca-tls
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
  namespace: datree
type: kubernetes.io/tls
data:
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBOWNKd2V5R3p2QVJseFd5dFlvd3FkL2F3RWsrTEs5c2RDQitpYURqMWpGMjJEQjJtCjk1cEo0Q1R0d3BKc3NuYnE3RkltSm5FRDdSVVI0RVlSRFNoa04wcm93L2dxSnZETUg4S0d5dS9tWlBnMGloaFkKelNMUk94VmR6aUFIRk1aMVMvOGVjOEREZmJIVTBGS2R5anlLUXM4all0Yzl2aUNHeWRLZTNBM1Y1RHJzbTZxMwpKbmFZam0zSXlPNzJmeit6Y3AvUmxmd0xNRW1XdExERUcvb051V0t6S2VqRDFJRWhGZHUzcVlPa05GY09jaWVGCjB5T2tkWm5BNlREa2RibTAweUNEcUhTVDhRZkttVEQ1cDdPODZ0ZHhqbTNOUlZzNkxIYXRrV3kvZk9OeWp2b1MKTmtUdFVDY3lZZm54MjdIWXVEcUdvU2xFY1EwSWJMRWVGMWxPNndJREFRQUJBb0lCQVFEdTBJekhTcC9DMUM4bApZdzgxMVdrcmZCL3JHenJ0V2haakg0S05idFJHRzRaZFRhOURxcjJoUDZGLzB4UW5kR0dqVmN6V3pEbjVkK0VRCkpHWkxkL1d5dVd0cGk4MUNXL3F2M2pOb0h5bXU4bmJ6dnVjRUtKSlRyTmFrQ0FGNWtjVElIZGkwdVJ2L0dBRHEKazIzYjZXcWRzM1g2aFpqdEdlU0JXTmVnbFIxRmtvbDdxK3JmRDJpUVVVd2ZEV2xOVWRzdmNvc3VtOUxsbVdUVgo0ckVHL3B5WGt6MXF1Q2pyelEyY25SM1hUYlpKbUV0TndKWGZ3MmZYaklNUXZDOVV3RUxncXhodTRLbFcvV2wzCjNQTXRReXR0ZEJOT3JpZEJwNjMwT3RMWE1aZG9BOFFDenVLZ2d2NHg3UXhKaTQ2UzRDYkF5aHczbWlOY2REamMKSlRKK0lPUTVBb0dCQVB6a0Fjd09VeXhOcDFncUprZVNSU2xsbVB0bG96WWxMSUFjSmdzNUJ4NmFlQUpoam13QwpmeEdaV2NhV1JzMmtwenQ0c2dIMkU2UzJ4Y296c3RIUFJ6c0M4ZXBVb0VoOC9ibTJkbUxPOGRxa0NIcFJLRThMClRzTUFUUy8rc09HYkd0dGhFRkkxL1JPMnM0Uk05Mm9yVmM1aU4vR0o2TlFSYnZzWVNrNUU3RVdWQW9HQkFQakgKL0pGZ2RoSTNDQ0VsejNTSkR1alZDVVVuaHc3RkZHdDhEQ3JzMEtHQmlmRkJrVFBXNDE4dUVBVG9OaS9oTVpNOApqc2ZyelVyUnNRQk1sazdRaHlXbHNXa04wUGs0MFJ1WDMvRGdnWkNIR2xkN1pUZXNHU2xjcFVWL1FxR3gvK3N6CjNlYm1JaXg1eEZjVVdPVUd6VlhpVVRTUW5KS1VXY0V4aUtUT0VTSi9Bb0dBZWVmUGxmWXgwZUY5RWRyL3FQQ3gKdGtycmZBUjZzTmNxcEhidFArdTFxdUw3aHVwUUpYRHVvQ1UwU2E2WFl2cEVRejdqVUY2M0NXZXg0TThiSEZpMwpGWk5OMnBBQTAvQ3N2cUZlWURNeUV4dVBtcWNVcjBYY0tkUXpZVGQ5UE1Qd0ptQ2I1WVZ4QWRmSW9iWVlibTJGClozK2hTQ1lhdmwvSkIvR2xvQ1ZKWUNFQ2dZRUF4NXh1NHBackppSlJ1NGNDOVpZakNGNG1tZjRsTjR5WjNjUWkKWHk2MEYySkFzL3JQN3JBMHIySGVLSkhKS0pHZm5XdXhoR2VHeU1tSEk1NVAyOTBsRXVmbmVVdEVxVE1WVlBaLwpFRjZTbHN4UUxuRXJ2WWV3aUtkMVZGWFB1TDJCZ2M2VDlYZ2hZMTR3VTA1WUpTdFlCZGtaSHZ3SkpQTXpNUGYxCms0Wmo2VEVDZ1lBNUorU3ZxM3hva2Q3VzBpK0I3NHlBZHUyZzN6R29JNTJiK2RrOTdpbm9GZmFXSGUzRW9nUmwKMGpTTmp5dlRaSXNTclFPTlZOVUpPNHRmdHF3MEtYQ0d3OVZha1JocnZTdWZBUFVxMU9CNStyNjB0UFVpZlcwVAp3UDZBdzNUeFJPNmlTVHh1MXkvUjBqQ21MOTcwMTRqNGc3UVQxRXZQeGRKTThNOTBwNHpPTHc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURVVENDQWptZ0F3SUJBZ0lRYk1BeTBVTnFqYTRud2w2N24xTE5ZREFOQmdrcWhraUc5dzBCQVFzRkFEQXoKTVRFd0x3WURWUVFERXlndlEwNDlRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXlNVEV4T0RFM05UWXlNbG9YRFRJM01URXhPVEUzTlRZeU1sb3dNekV4TUM4R0ExVUVBeE1vCkwwTk9QVUZrYldsemMybHZiaUJEYjI1MGNtOXNiR1Z5SUZkbFltaHZiMnNnUkdWdGJ5QkRRVENDQVNJd0RRWUoKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFhDY0hzaHM3d0VaY1ZzcldLTUtuZjJzQkpQaXl2YgpIUWdmb21nNDlZeGR0Z3dkcHZlYVNlQWs3Y0tTYkxKMjZ1eFNKaVp4QSswVkVlQkdFUTBvWkRkSzZNUDRLaWJ3CnpCL0Noc3J2NW1UNE5Jb1lXTTBpMFRzVlhjNGdCeFRHZFV2L0huUEF3MzJ4MU5CU25jbzhpa0xQSTJMWFBiNGcKaHNuU250d04xZVE2N0p1cXR5WjJtSTV0eU1qdTluOC9zM0tmMFpYOEN6QkpsclN3eEJ2NkRibGlzeW5vdzlTQgpJUlhidDZtRHBEUlhEbkluaGRNanBIV1p3T2t3NUhXNXROTWdnNmgway9FSHlwa3crYWV6dk9yWGNZNXR6VVZiCk9peDJyWkZzdjN6amNvNzZFalpFN1ZBbk1tSDU4ZHV4MkxnNmhxRXBSSEVOQ0d5eEhoZFpUdXNDQXdFQUFhTmgKTUY4d0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjRApBakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjBHQTFVZERnUVdCQlNZc2J0dVRBVzRKYVJkQnJ4RzFWY2ZNdUZQCmJqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFubE1jazNrdHFGY3psNEhMWDdOZ0FLUXFIeUpoSWo3T0FWM3oKWWdvVDg5amxGWUExTUsrOUFneGhjL3ByTHBnbzNrUzFveDE1cGVpclhXV3BSS0V6MnloRVFJTlJRQktBOUFyaApSVEpPS2RLclpVZ1UySEJvMTF1VEh1dG5uSEdKUUhndVNPdjkyeW9WL3ovaVVxdnZHaXhld0dlTnBJMzUwVU9ZCjE1TW13RFdmcHBjM1kzOEMrMUs3dmpsRFhqSjFuWWptSS9ETFBnMlFTZTBmcCtoNzZOUGVNbWw2LzVjMDJURWoKUVR6ejlOU1UyZ0lCa1ZQTEhrcmRSbmc3R2FON0o3U1UyQWM5Smh3NlpJQTNUYjFZN2lqTzdmMG1wU0M4Y25wSgpheVIrYmN2bXJHOUd1SXVpeXlRdFh0M3hjNTBLM0tRbXo5aTJueWNvU3Njd3NLSGpEUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: datree-admission-webhook/templates/webhook-with-cert-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: webhook-server-tls
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
  namespace: datree
  annotations:
    self-signed-cert: "true"
type: kubernetes.io/tls
data:
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBd0wwT3AzNTNYanlVTVIxVGdoMmdGYmxZV1NIcXpua0VEbU4wVXUvMVI1Rjd6b2x4CllNYkJRKzBjblNMV0ljd1dtTXdDaUk4Y2tqU2twN0Nuak5QSnVYcWFsY0YwZkkyUnA2VHBsSFFzKzdRLzNkSEEKa2J5TVpiQ3lWTHhmSXVjby9WeVAwL3lOa2FJNmFESXZKNmd2WGZ5NFVNSmNITTJHR3FPQzQ5Qnl4VWttY0tRcQozN3duSC93ckpWZDVZRXFNbjVGaFVSTEg2UmJOWGhKNUIvTnJoK25hKy9wT0dCa0g5elJCd3BhS2JIREtQc0ZlCm9nczJZNm9CVi8wREpuNnF6cDBWa0pMbXpVenRZKysvbGhGRmljWnF1RkJINlYyODJZQkdxQ084aTJyUnhCWmcKMlVCSVA0TFV3Q2trM0hvaFI0eTJZZlZZVGFPYWlXcXZtcG1IZFFJREFRQUJBb0lCQUZPRTJVZk5ibzZBYzdzQQp1VUlsOGt2WG9DZ25vV2ROVzJ1Y3Z6aDlVTzF0WnBmdVNSb2xwblAzMkxGaStpVjFHY21taGVhRkZWMXB3SHdGCitlVDFsWEZ4Wm5GRWZtVEd0L3BNWlFkMmZGT3FIUTdUS0w0K1ZSeHZ3Q2NsNVpmclVZRFF6bWFQQncyM25kV3YKQVc0TzNFKy9CbVBBaFVmWjY2VzVleXViRlZEVmk5QzdJeDhZcG5QUW1YeE5MSmZZSE9kSFU0K0c1aWZYUThPdgpqamFyNXFIMm16VW81RTUvbEVjZXplaVJqUkdBTVU2NkUzK0VHS0s0WXZ4Z0pCMDUvR2dNVjRReTFpYUlpMDVyClZPZHAvZWNkOXo2eUVmRGh2WTVaV0JPVm5VUXBXWmZIdVNwK0RaNEFDaGpmSXJ6OWhnTW8wVlRNY3FRdnB5dEQKU0ZFZXFOVUNnWUVBektGUTV6aG9lNlU0eisxMHYzeDB4VUp2cGdWemlZUCt6VnNjVFNlQ2xXaXVMN0Q5aHdBYQphUVpyNHhWdEZDTHg3dytmaGxhdkJ6YXNqVmJYTWxqb3c0b0ZTK2RmaUtnalQ0ei9ZSDZsSUVuaE1YRnZ6V2UvCkRuMzhDaHlieG94S2JhS0JRL01tSnlEcDFlUFVxV0doS2Y2WkVNYnF6Z09KelVaeWRCczVWeXNDZ1lFQThSK0UKam0wTkFFRjhNYVVQNkVLSXRUa3BoOURDdCtBVkhDZXNwRTZkSHhYMjBNa3llT2lHbXVud3BWcmYxZkE5MkphMApTQ1lVaHdYU2dJMy9JV04xUmtuWGNUNHBGRVRRbkJ2eWpNNUtIMDdnNXc4L0JBNjVvNk40Ykg1SVgrcjIreTh3Ci9ZdDRJN3UwSjdKYld0WnNKekM3U05DWkJKSzMyUjNGcktiWFM5OENnWUVBc3FTS09yRzJGV3V5WTJQTUxuZDYKZ2ROMElSNVZOVkowbWRiV3FFeTc1YS9Ua1hNVWdrMEd3WFdIcm1IQUxub3JlQ2JOZjd3aFpVekg2MFJLN250TQpDWmx1OGtyMXpobnJhY0dRR1MrMi9LOUMxNlZPazZYazE4UUl5dE1hODRUNlhTZ25iYWpTUUFxdDJicmlwMVRDCkhDVldmNTBJMC8ybXlmeWNZdHg1ZkswQ2dZQXUyN0VtL0lwS1FtK2dOak9oTDB6aDZ2bm5LdXFzVVIvSkdPeTAKQVpNSE4zMS9sWm41WlRiRFpETWY3MGtRaWw5NmQ4OFJObFZHNkJyQVlOZno1U0FsU0xSVmpYN3VNWEZZNVJWOQp4NWtmL0hRNGN2NE1DOUNIdkh6cW1KLzRBL0Y3WHZCbVZYUkRmWGJGUUNRQXd5ckJjdmJ5YjVkTkREWXVPMXJ1CjhuMWtnUUtCZ1FDYWFBNDY1UUI4VEJkRjhhMTREMGltbUpvOFFMamtibWVteGtZTjVuYmdad2ExM0I5U1IyZzAKS3l0ZTJ3d1BqQzRqZ1NsbjFyVkV0M1FrSENBTUg1ZDZhVVZVckhlUXNIK2NoQ3czNWFJbmJyZG5YQ0I5M2Y2aQp3eTl1V05SRFZYZk5TU1d0QkQ3WGVHSXVwa2Z6cTJqK2duYVdTVGd4VHRJUW5RSHdRTWhCTkE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURmRENDQW1TZ0F3SUJBZ0lSQUtibzRQUTZaRXlzMURGcTEyZmVIblF3RFFZSktvWklodmNOQVFFTEJRQXcKTXpFeE1DOEdBMVVFQXhNb0wwTk9QVUZrYldsemMybHZiaUJEYjI1MGNtOXNiR1Z5SUZkbFltaHZiMnNnUkdWdApieUJEUVRBZUZ3MHlNakV4TVRneE56VTJNakphRncweU56RXhNVGt4TnpVMk1qSmFNQzh4TFRBckJnTlZCQU1UCkpDOURUajFrWVhSeVpXVXRkMlZpYUc5dmF5MXpaWEoyWlhJdVpHRjBjbVZsTG5OMll6Q0NBU0l3RFFZSktvWkkKaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNQzlEcWQrZDE0OGxERWRVNElkb0JXNVdGa2g2czU1QkE1agpkRkx2OVVlUmU4NkpjV0RHd1VQdEhKMGkxaUhNRnBqTUFvaVBISkkwcEtld3A0elR5Ymw2bXBYQmRIeU5rYWVrCjZaUjBMUHUwUDkzUndKRzhqR1d3c2xTOFh5TG5LUDFjajlQOGpaR2lPbWd5THllb0wxMzh1RkRDWEJ6TmhocWoKZ3VQUWNzVkpKbkNrS3QrOEp4LzhLeVZYZVdCS2pKK1JZVkVTeCtrV3pWNFNlUWZ6YTRmcDJ2djZUaGdaQi9jMApRY0tXaW14d3lqN0JYcUlMTm1PcUFWZjlBeVorcXM2ZEZaQ1M1czFNN1dQdnY1WVJSWW5HYXJoUVIrbGR2Tm1BClJxZ2p2SXRxMGNRV1lObEFTRCtDMU1BcEpOeDZJVWVNdG1IMVdFMmptb2xxcjVxWmgzVUNBd0VBQWFPQmpqQ0IKaXpBT0JnTlZIUThCQWY4RUJBTUNCYUF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQwpNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVtTEc3Ymt3RnVDV2tYUWE4UnRWWEh6TGhUMjR3Ckt3WURWUjBSQkNRd0lvSWdaR0YwY21WbExYZGxZbWh2YjJzdGMyVnlkbVZ5TG1SaGRISmxaUzV6ZG1Nd0RRWUoKS29aSWh2Y05BUUVMQlFBRGdnRUJBQmJET0dnc0o0MWVWRlR0UCtyYSsxbnlmSmF3SXlBa0g0d3Zrb0N4eFNXUAprc1BwTTUySWZXd1cxSnk0dWFkYlFIRktSbWZjZkVKSEpWLzNVZTBGVWxQWHVWZzBjWXQ5RDdlZ3UrNVJGb3hlCkdrSkw3bkU2dmZuTVpYM3ZXZlROb3dEbERhVExHRmdpQzBPSXZZREhCc3hzSXFKYkErNmtnUGxsNVFMU1paajcKSHA5UkhRc3ZLMENxM0ZQenJ4MVpmaTd1Zk9HTXdrbmFEYkxsTU0xMzUxUE11d2NOMjFNQ2FSWk5EUlA4Rnh4MQphQjNrUjlQNzJaRmlvNFpQNFkvdzYxK1JQMXFhRk4zc2V0TW9uRk5BVnh1WG0reDhrd20xOHN6a2ZYSUFTQ1dBCm5RaUpzOW03d3hYempyVEkrMWFLempYU1NlQTZRL0dkQzV1c0xIelFpbnM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
# Source: datree-admission-webhook/templates/cluster-scan-cronjob.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-scan-job-role
rules:
  - apiGroups:
      - "*"
    resources:
      - "*"
    verbs:
      - "get"
      - "list"
---
# Source: datree-admission-webhook/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: datree-webhook-server-read
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
rules:
  - apiGroups:
      - ""
    resources:
      - "nodes"
      - "namespaces"
    verbs:
      - "get"
      - "list"
---
# Source: datree-admission-webhook/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: datree-namespaces-update
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
rules:
  - apiGroups:
      - ""
    resources:
      - namespaces
    verbs:
      - get
      - update
      - patch
    resourceNames:
      - kube-system
      - datree
---
# Source: datree-admission-webhook/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: datree-validationwebhook-delete
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
rules:
  - apiGroups:
      - "admissionregistration.k8s.io"
    resources:
      - validatingwebhookconfigurations
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
    resourceNames:
      - datree-webhook
---
# Source: datree-admission-webhook/templates/cluster-scan-cronjob.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cluster-scan-job-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-scan-job-role
subjects:
  - kind: ServiceAccount
    name: cluster-scan-job-service-account
    namespace: datree
---
# Source: datree-admission-webhook/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: datree-webhook-server-read 
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: datree-webhook-server-read # datree-webhook-server-read
subjects:
  - kind: ServiceAccount
    name: datree-webhook-server # datree-webhook-server
    namespace: datree
---
# Source: datree-admission-webhook/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: datree-namespaces-update
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: datree-namespaces-update
subjects:
  - kind: ServiceAccount
    name: "datree-label-namespaces-hook-post-install"
    namespace: "datree"
  - kind: ServiceAccount
    name: "datree-cleanup-namespaces-hook-pre-delete"
    namespace: "datree"
---
# Source: datree-admission-webhook/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: datree-validationwebhook-delete
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: datree-validationwebhook-delete
subjects:
  - kind: ServiceAccount
    name: "datree-cleanup-namespaces-hook-pre-delete"
    namespace: "datree"
---
# Source: datree-admission-webhook/templates/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: datree-pods-reader
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
rules:
  - apiGroups:
      - ""
    resources:
      - "pods"
      - "jobs"
    verbs:
      - "get"
      - "list"
      - "watch"
---
# Source: datree-admission-webhook/templates/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: datree-pods-reader
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: datree-pods-reader
subjects:
  - kind: ServiceAccount
    name: datree-wait-server-ready-hook-post-install
    namespace: "datree"
---
# Source: datree-admission-webhook/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: datree-webhook-server
  namespace: datree
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
spec:
  selector:
    app: "datree-webhook-server"
  ports:
    - port: 443
      targetPort: webhook-api
---
# Source: datree-admission-webhook/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: datree-webhook-server
  namespace: datree
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
    owner: datree
    app: "datree-webhook-server"
spec:
  replicas: 2
  selector:
    matchLabels: 
      app: "datree-webhook-server"
  template:
    metadata:
      labels: 
        app.kubernetes.io/name: datree-admission-webhook
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "datree-webhook"
        app.kubernetes.io/version: 0.1.30
        app.kubernetes.io/part-of: "datree"
        meta.helm.sh/release-name: "datree-admission-webhook"
        meta.helm.sh/release-namespace: "datree" 
        helm.sh/chart: datree-admission-webhook-0.3.10
        app: "datree-webhook-server"
    spec:
      serviceAccountName: datree-webhook-server
      containers:
        - name: server
          # caution: don't change the order of the environment variables
          # changing the order will harm resource patching
          env:
            - name: DATREE_TOKEN
              value: 41768880-c714-43be-a6ec-95511931bb5e
            - name: DATREE_POLICY
              value: 
            - name: DATREE_VERBOSE
              value: 
            - name: DATREE_OUTPUT
              value: 
            - name: DATREE_NO_RECORD
              value: 
            - name: DATREE_ENFORCE
              value: 
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 25000
          livenessProbe:
            httpGet:
              path: /health
              port: 8443
              scheme: HTTPS
            initialDelaySeconds: 5
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /ready
              port: 8443
              scheme: HTTPS
            initialDelaySeconds: 5
            periodSeconds: 10
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 1000m
              memory: 512Mi
          image: "datree/admission-webhook:0.1.30"
          imagePullPolicy: Always
          ports:
            - containerPort: 8443
              name: webhook-api
          volumeMounts:
            - name: webhook-tls-certs
              mountPath: /run/secrets/tls
              readOnly: true
            - name: webhook-config
              mountPath: /config
              readOnly: true
      volumes:
        - name: webhook-tls-certs
          secret:
            secretName: webhook-server-tls
        - name: webhook-config
          configMap:
            name: webhook-scanning-filters
            optional: true
---
# Source: datree-admission-webhook/templates/cluster-scan-cronjob.yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  name: scan-cronjob
  namespace: datree
spec:
  # get the current time, subtract 5 minutes, extract the minutes and inject it into the cron expression
  # if helm installation was done at 13:35, the cron expression will be 30 * * * *, which means the job will run at 14:30, 15:30, 16:30, etc.
  schedule: "51 * * * *" # every hour, starting 55 minutes after helm installation
  jobTemplate: 
    spec:
      backoffLimit: 4
      template:
        spec:
          serviceAccountName: cluster-scan-job-service-account
          restartPolicy: Never
          containers:
            - name: scan-job
              env:
                - name: DATREE_TOKEN
                  value: 41768880-c714-43be-a6ec-95511931bb5e
              securityContext:
                allowPrivilegeEscalation: false
                readOnlyRootFilesystem: true
                runAsNonRoot: true
                runAsUser: 25000
                seccompProfile:
                  type: RuntimeDefault
              image: "datree/scan-job:0.0.8"
              imagePullPolicy: Always
              resources:
                limits:
                  cpu: 1000m
                  memory: 512Mi
                requests:
                  cpu: 500m
                  memory: 256Mi
---
# Source: datree-admission-webhook/templates/cluster-scan-cronjob.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: scan-job
  namespace: datree
  annotations:
    "helm.sh/hook": post-install
spec:
  backoffLimit: 4
  template:
    spec:
      serviceAccountName: cluster-scan-job-service-account
      restartPolicy: Never
      containers:
        - name: scan-job
          env:
            - name: DATREE_TOKEN
              value: 41768880-c714-43be-a6ec-95511931bb5e
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 25000
            seccompProfile:
              type: RuntimeDefault
          image: "datree/scan-job:0.0.8"
          imagePullPolicy: Always
          resources:
            limits:
              cpu: 1000m
              memory: 512Mi
            requests:
              cpu: 500m
              memory: 256Mi
---
# Source: datree-admission-webhook/templates/namespace-post-delete.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: datree-cleanup-namespaces-hook-pre-delete
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
  namespace: datree
  annotations: 
    "helm.sh/hook": pre-delete, pre-upgrade
    "helm.sh/hook-delete-policy": hook-succeeded, hook-failed
spec:
  template:
    metadata:
      labels: 
        app.kubernetes.io/name: datree-admission-webhook
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "datree-webhook"
        app.kubernetes.io/version: 0.1.30
        app.kubernetes.io/part-of: "datree"
        meta.helm.sh/release-name: "datree-admission-webhook"
        meta.helm.sh/release-namespace: "datree" 
        helm.sh/chart: datree-admission-webhook-0.3.10
    spec:
      restartPolicy: OnFailure
      serviceAccount: datree-cleanup-namespaces-hook-pre-delete
      nodeSelector:
        kubernetes.io/os: linux
      containers:
        - name: kubectl-label
          image: "bitnami/kubectl@sha256:d3c17f1dc6e665dcc78e8c14a83ae630bc3d65b07ea11c5f1a012c2c6786d039"
          imagePullPolicy: IfNotPresent
          command:
            - sh
            - "-c"
            - >-
              kubectl delete validatingwebhookconfigurations.admissionregistration.k8s.io datree-webhook -n datree;
              kubectl label ns kube-system datree datree.io/skip-;
---
# Source: datree-admission-webhook/templates/namespace-post-install.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: datree-label-namespaces-hook-post-install
  namespace: datree
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
  annotations:
    "helm.sh/hook": post-install, post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": hook-succeeded, hook-failed
spec:
  template:
    metadata:
      labels: 
        app.kubernetes.io/name: datree-admission-webhook
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "datree-webhook"
        app.kubernetes.io/version: 0.1.30
        app.kubernetes.io/part-of: "datree"
        meta.helm.sh/release-name: "datree-admission-webhook"
        meta.helm.sh/release-namespace: "datree" 
        helm.sh/chart: datree-admission-webhook-0.3.10
    spec:
      serviceAccount: datree-label-namespaces-hook-post-install
      restartPolicy: OnFailure
      nodeSelector:
        kubernetes.io/os: linux
      containers:
        - name: kubectl-label
          image: "bitnami/kubectl@sha256:d3c17f1dc6e665dcc78e8c14a83ae630bc3d65b07ea11c5f1a012c2c6786d039"
          imagePullPolicy: IfNotPresent
          args:
            - label
            - ns
            - kube-system
            - datree
            - admission.datree/validate=skip
            - --overwrite
---
# Source: datree-admission-webhook/templates/wait-server-ready-post-install.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: datree-wait-server-ready-hook-post-install
  namespace: datree
  labels: 
    app.kubernetes.io/name: datree-admission-webhook
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "datree-webhook"
    app.kubernetes.io/version: 0.1.30
    app.kubernetes.io/part-of: "datree"
    meta.helm.sh/release-name: "datree-admission-webhook"
    meta.helm.sh/release-namespace: "datree" 
    helm.sh/chart: datree-admission-webhook-0.3.10
  annotations:
    "helm.sh/hook": post-install, post-upgrade
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": hook-succeeded, hook-failed
spec:
  template:
    metadata:
      name: datree-wait-server-ready-hook-post-install
      labels: 
        app.kubernetes.io/name: datree-admission-webhook
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "datree-webhook"
        app.kubernetes.io/version: 0.1.30
        app.kubernetes.io/part-of: "datree"
        meta.helm.sh/release-name: "datree-admission-webhook"
        meta.helm.sh/release-namespace: "datree" 
        helm.sh/chart: datree-admission-webhook-0.3.10
    spec:
      serviceAccountName: datree-wait-server-ready-hook-post-install
      restartPolicy: Never
      containers:
      - name: kubectl-client
        image: "bitnami/kubectl@sha256:d3c17f1dc6e665dcc78e8c14a83ae630bc3d65b07ea11c5f1a012c2c6786d039"
        imagePullPolicy: IfNotPresent
        command:
          - sh
          - "-c"
          - >-
            kubectl wait --for=condition=ready pod -l app=datree-webhook-server --timeout="180s"
---
# Source: datree-admission-webhook/templates/webhook-with-cert-secrets.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: datree-webhook
  annotations:
    "helm.sh/hook": post-install, post-upgrade
    "helm.sh/hook-weight": "-5"
webhooks:
  - name: webhook-server.datree.svc
    sideEffects: None
    timeoutSeconds: 30
    admissionReviewVersions:
      - v1
      - v1beta1
    clientConfig:
      service:
        name: datree-webhook-server
        namespace: datree
        path: "/validate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURVVENDQWptZ0F3SUJBZ0lRYk1BeTBVTnFqYTRud2w2N24xTE5ZREFOQmdrcWhraUc5dzBCQVFzRkFEQXoKTVRFd0x3WURWUVFERXlndlEwNDlRV1J0YVhOemFXOXVJRU52Ym5SeWIyeHNaWElnVjJWaWFHOXZheUJFWlcxdgpJRU5CTUI0WERUSXlNVEV4T0RFM05UWXlNbG9YRFRJM01URXhPVEUzTlRZeU1sb3dNekV4TUM4R0ExVUVBeE1vCkwwTk9QVUZrYldsemMybHZiaUJEYjI1MGNtOXNiR1Z5SUZkbFltaHZiMnNnUkdWdGJ5QkRRVENDQVNJd0RRWUoKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBUFhDY0hzaHM3d0VaY1ZzcldLTUtuZjJzQkpQaXl2YgpIUWdmb21nNDlZeGR0Z3dkcHZlYVNlQWs3Y0tTYkxKMjZ1eFNKaVp4QSswVkVlQkdFUTBvWkRkSzZNUDRLaWJ3CnpCL0Noc3J2NW1UNE5Jb1lXTTBpMFRzVlhjNGdCeFRHZFV2L0huUEF3MzJ4MU5CU25jbzhpa0xQSTJMWFBiNGcKaHNuU250d04xZVE2N0p1cXR5WjJtSTV0eU1qdTluOC9zM0tmMFpYOEN6QkpsclN3eEJ2NkRibGlzeW5vdzlTQgpJUlhidDZtRHBEUlhEbkluaGRNanBIV1p3T2t3NUhXNXROTWdnNmgway9FSHlwa3crYWV6dk9yWGNZNXR6VVZiCk9peDJyWkZzdjN6amNvNzZFalpFN1ZBbk1tSDU4ZHV4MkxnNmhxRXBSSEVOQ0d5eEhoZFpUdXNDQXdFQUFhTmgKTUY4d0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjRApBakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjBHQTFVZERnUVdCQlNZc2J0dVRBVzRKYVJkQnJ4RzFWY2ZNdUZQCmJqQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFubE1jazNrdHFGY3psNEhMWDdOZ0FLUXFIeUpoSWo3T0FWM3oKWWdvVDg5amxGWUExTUsrOUFneGhjL3ByTHBnbzNrUzFveDE1cGVpclhXV3BSS0V6MnloRVFJTlJRQktBOUFyaApSVEpPS2RLclpVZ1UySEJvMTF1VEh1dG5uSEdKUUhndVNPdjkyeW9WL3ovaVVxdnZHaXhld0dlTnBJMzUwVU9ZCjE1TW13RFdmcHBjM1kzOEMrMUs3dmpsRFhqSjFuWWptSS9ETFBnMlFTZTBmcCtoNzZOUGVNbWw2LzVjMDJURWoKUVR6ejlOU1UyZ0lCa1ZQTEhrcmRSbmc3R2FON0o3U1UyQWM5Smh3NlpJQTNUYjFZN2lqTzdmMG1wU0M4Y25wSgpheVIrYmN2bXJHOUd1SXVpeXlRdFh0M3hjNTBLM0tRbXo5aTJueWNvU3Njd3NLSGpEUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    namespaceSelector:
      matchExpressions:
        - key: admission.datree/validate
          operator: DoesNotExist
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["*"]
        apiVersions: ["*"]
        resources: ["*"]
